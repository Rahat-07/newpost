<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" >
    <link rel="stylesheet" href="css/style.css">

  </head>
  <body>
    <section>
      <header>
          <div class="topnavbar"><div class="container"></div></div>

        <nav class="navbar navbar-light fixed-top navbar-scroll">
            <div class="container">
              <a class="navbar-brand" href=""><img src="img/logo-light.png" alt=""></a>
              <div>



<!-- Trigger/Open The Modal -->
<button id="lichka" class="btn btn-primary">Şahsy otag</button>
<button id="me" class="btn btn-primary" style="display: none;">ME</button>
<button id="init" class="btn btn-primary" style="display: none;">Init</button>


<!-- The Modal -->
<div id="memodal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">

    <div class="w3-bar w3-black">
      <!-- <button class="w3-bar-item w3-button mb-2 btn btn-primary" onclick="openCity('Login')">Login</button>
      <button class="w3-bar-item w3-button mb-2 btn btn-primary" onclick="openCity('Register')">Register</button> -->
      <span class="closeme" style="line-height: 0.5;float: right;">x</span>


      
    </div>
    

  </div>

</div>

<!-- The Modal -->
<div id="lichkamodal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">

    <div class="w3-bar w3-black">
      <button class="w3-bar-item w3-button mb-2 btn btn-primary" onclick="openCity('Login')">Login</button>
      <button class="w3-bar-item w3-button mb-2 btn btn-primary" onclick="openCity('Register')">Register</button>
      <span class="closelichka" style="line-height: 0.5;float: right;">x</span>
    </div>

    <div id="Login" class="login">
      <section class="vh-50 mt-0 pt-0">
        <div class="container-fluid h-custom">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
              <form>
                <div class="form-outline mb-1">
                  <label class="form-label" for="form3Example3">Phone</label>
                  <input type="text" name="loginphone" id="loginphone" class="form-control"
                    placeholder="Enter a valid phone" />
                </div>
                <div class="form-outline mb-1">
                  <label class="form-label" for="form3Example4">Password</label>
                  <input type="password" name="loginpasswd" id="loginpasswd" class="form-control"
                    placeholder="Enter password" />
                </div>
                <div class="text-center text-lg-start mt-1 pt-0" id="loginbtn">
                  <button type="button" class="btn btn-primary btn-lg"
                    style="padding-left: 2.5rem; padding-right: 2.5rem;" id="login">Login</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>
    </div>
    
    <div id="Register" class="login" style="display:none">
      <section class="vh-50 mt-0 pt-0">
        <div class="container-fluid h-custom">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
              <form>
                <div class="form-outline mb-1">
                  <label class="form-label" for="form4Example4">Phone</label>
                  <input type="text" id="regphone" name="regphone" class="form-control"
                    placeholder="Enter a valid phone" />
                </div>
                <div class="form-outline mb-1" id="otpform" style="display: none;">
                  <label class="form-label">Otp</label>
                  <input type="text" id="otp" name="otp" class="form-control"
                    placeholder="Enter a valid otp" />
                </div>
                <div class="form-outline mb-1" id="passwdform" style="display: none;">
                  <label class="form-label">Password</label>
                  <input type="text" id="passwd" name="passwd" class="form-control"
                    placeholder="Enter a valid passwd" />
                </div>
                <div class="text-center text-lg-start mt-1 pt-0" id="registerbtn">
                  <button type="button" class="btn btn-primary btn-lg"
                    style="padding-left: 2.5rem; padding-right: 2.5rem;" id="register">Register</button>
                </div>
                <div class="text-center text-lg-start mt-1 pt-0" id="confirmbtn" style="display: none;">
                  <button type="button" class="btn btn-primary btn-lg"
                    style="padding-left: 2.5rem; padding-right: 2.5rem;" id="confirm">Confirm</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>
    </div>
    

  </div>

</div>



              <button class="btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><span class="navbar-toggler-icon"></span></button>
              <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
                <div class="offcanvas-header">
                  <h5 id="offcanvasRightLabel">MENU</h5>
                  <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                  <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: auto;">
                    <li class="nav-item">
                      <a class="nav-link" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Link
                      </a>
                      <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                      </ul>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link">Link</a>
                    </li>
                  </ul>           
                </div>
              </div>
              <!-- <div class="collapse navbar-collapse" id="navbarScroll">
                    
              </div> -->
            </div>
          </div>
          </nav>
        </header>
        </section>
        <section>
          <div class="home-top-banner">
            <div class="container home-top-text">
                <div class="text-light home-top-left">
                  <img src="img/Home-slide-Buuhia-1920x540.jpg" alt="">
                </div>
              <div class="text-light home-top-right">
                <h4>"Türkmenpoçta" Poçta aragatnaşyk kompaniýasy</h4> 
                <h5>"Türkmenpoçta" Poçta aragatnaşyk kompaniýasynyň islendik bölüminde Türkmenistanyň ähli ýerine, şeýle-de daşary ýurtlara hatlary, ýollamalary ugradyp bolýar. Uly göwrümli ýollamalary, EMS ýollamalary we tiz geçirimleri diňe eltip berme hyzmaty arkaly amala aşyrylýar</h5>
              </div>
            </div>
          </div>
        </section>   
        <section>
          <div class="container">
          
          <div class="trackingsection my-4 d-flex justify-content-center align-items-center">
            <p class="text-light">"Türkmenpoçta" poçta aragatnaşyk kompaniýasy"</p>
            <div class="d-flex"><input type="text" placeholder="Track ID" class="form-control"><button type="button" class="btn btn-dark">G</button></div>
          </div>
          <div class="text-center">
            <img src="img/sorag-jogap.png" alt="">
          </div>
        </div>
        </section>
        <section>
          <div class="container-fluid">
            <div class="container">
              <h2 class="text-uppercase h2-with-underline mb-4 mt-5">Habarlar<span class="underline"></span></h2>
              <div class="row d-flex justify-content-center">
                <div class="col-lg-4 col-md-6 mb-4">
                  <div class="card card2 h-100">
                    <div class="card-body text-center p-3">
                      <img src="img/d.jpeg" class="img-fluid" alt="">
                      <h6 class="card-title mt-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</h6>
                      <span class="underlineblue"></span>
                    </div>     
                  </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                  <div class="card card2 h-100">
                    <div class="card-body text-center p-3">
                      <img src="img/d.jpeg" class="img-fluid" alt="">
                      <h6 class="card-title mt-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</h6>
                      <span class="underlineblue"></span>
                    </div>     
                  </div>
                </div>
              </div>    
            </div>
            </div>
        </section>
        <section>
          <div class="container-fluid">
            <div class="container">
              <h2 class="text-uppercase h2-with-underline mb-4 mt-4">Hyzmatlar<span class="underline"></span></h2>
              <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                  <div class="card card1 h-100">
                    <div class="card-body text-center">
                      <img src="img/tickets.png" class="img-fluid" alt=""><span class="underlineblue"></span>
                      <h5 class="card-title my-3">Poçta ýollamalary</h5>
                    </div>     
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                  <div class="card card1 h-100">
                    <div class="card-body text-center">
                      <img src="img/stop-watch.png" class="img-fluid" alt=""><span class="underlineblue"></span>
                      <h5 class="card-title my-3">Gazetler we žurnallar</h5>
                    </div>     
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                  <div class="card card1 h-100">
                    <div class="card-body text-center">
                      <img src="img/unknown.png" class="img-fluid" alt=""><span class="underlineblue"></span>
                      <h5 class="card-title my-3">Çapar çagyrmak</h5>
                    </div>     
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                  <div class="card card1 h-100">
                    <div class="card-body text-center">
                      <img src="img/railways.png" class="img-fluid" alt=""><span class="underlineblue"></span>
                      <h5 class="card-title my-3">PÝGG Töleg</h5>
                    </div>     
                  </div>
                </div>
              </div>    
            </div>
            </div>
        </section>
        <section>
            <div class="app text-center">
              <video
    title="Türkmenpoçta"
    src="img/video.mp4"
    autoplay="true"
    muted="muted">
              </video>
            </div>
        </section>
        <section>
         

        </section>
        <!-- Footer -->
<footer class="text-center text-lg-start bg-light text-muted">
  <!-- Section: Links  -->
  <section class="">
    <div class="container text-center text-md-start">
      <!-- Grid row -->
      <div class="row" style="padding-top: 30px;">
        <!-- Grid column -->
        <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
          <!-- Content -->
          <h6 class="text-uppercase fw-bold mb-4">
            <i class="fas fa-gem me-3"></i>Company name
          </h6>
          <p>
            Here you can use rows and columns to organize your footer content. Lorem ipsum
            dolor sit amet, consectetur adipisicing elit.
          </p>
        </div>
        <!-- Grid column -->

        <!-- Grid column -->
        <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
          <!-- Links -->
          <h6 class="text-uppercase fw-bold mb-4">
            Products
          </h6>
          <p>
            <a href="#!" class="text-reset">Angular</a>
          </p>
          <p>
            <a href="#!" class="text-reset">React</a>
          </p>
          <p>
            <a href="#!" class="text-reset">Vue</a>
          </p>
          <p>
            <a href="#!" class="text-reset">Laravel</a>
          </p>
        </div>
        <!-- Grid column -->

        <!-- Grid column -->
        <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
          <!-- Links -->
          <h6 class="text-uppercase fw-bold mb-4">
            Useful links
          </h6>
          <p>
            <a href="#!" class="text-reset">Pricing</a>
          </p>
          <p>
            <a href="#!" class="text-reset">Settings</a>
          </p>
          <p>
            <a href="#!" class="text-reset">Orders</a>
          </p>
          <p>
            <a href="#!" class="text-reset">Help</a>
          </p>
        </div>
        <!-- Grid column -->

        <!-- Grid column -->
        <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
          <!-- Links -->
          <h6 class="text-uppercase fw-bold mb-4">Contact</h6>
          <p><i class="fas fa-home me-3"></i> New York, NY 10012, US</p>
          <p>
            <i class="fas fa-envelope me-3"></i>
            info@example.com
          </p>
          <p><i class="fas fa-phone me-3"></i> + 01 234 567 88</p>
          <p><i class="fas fa-print me-3"></i> + 01 234 567 89</p>
        </div>
        <!-- Grid column -->
      </div>
      <!-- Grid row -->
    </div>
  </section>
  <!-- Section: Links  -->

  <!-- Copyright -->
  <div class="text-center p-4" style="background-color: rgba(0, 0, 0, 0.05);">
    © 2021 Copyright:
    <a class="text-reset fw-bold" href="https://mdbootstrap.com/">Türkmenpoçta</a>
  </div>
  <!-- Copyright -->
</footer>
<!-- Footer -->
  </body>

  <script src="js/jquery.slim.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>

  <script>
    // Get the modal
var lichkamodal = document.getElementById('lichkamodal');
var memodal = document.getElementById('memodal');

// Get the button that opens the modal
var lichka = document.getElementById("lichka");
var me = document.getElementById("me");

// Get the <span> element that closes the modal
var spanlichka = document.getElementsByClassName("closelichka")[0];
var spanme = document.getElementsByClassName("closeme")[0];

// When the user clicks on the button, open the modal
lichka.onclick = function() {
    lichkamodal.style.display = "block";
}

me.onclick = function() {
    memodal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
spanlichka.onclick = function() {
    lichkamodal.style.display = "none";
}
spanme.onclick = function() {
    memodal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == lichkamodal) {
        lichkamodal.style.display = "none";
        
    }
    if (event.target == memodal) {
        memodal.style.display = "none";
        
    }
}

function openCity(cityName) {
  var i;
  var x = document.getElementsByClassName("login");
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  document.getElementById(cityName).style.display = "block";
}

  </script>


<script src="js/jquery.min.js"></script>
<script src="js//jquery.cookie.min.js"></script>

<script>
var smsid;
var tokenn;


// function getJSessionId(){
//     var jsId = document.cookie.match(/JSESSIONID=[^;]+/);
//     if(jsId != null) {
//         if (jsId instanceof Array)
//             jsId = jsId[0].substring(11);
//         else
//             jsId = jsId.substring(11);
//     }
//     return jsId;
// }



// $("#me").click(function(){

//     $.ajax({
//     url: 'https://dev.post.tm/v2/user/me',
//     headers: {
//       // 'Content-Type': 'application/json',
//       'X-CSRFToken': tokenn,
//     },
//     type: "GET",
//     dataType: "json",
//     // data:{'csrftoken': $.cookie('csrftoken'), 'sessionid': $.cookie('sessionid')},
//     success: function (result) {
// console.log(result)
//   // document.cookie = 'csrftoken='+result.detail.loc[0].sec;
// // phonecheck4log(result.detail.loc[0].sec)

//     },
//     error: function () {
//         console.log("error");
//     }
// });
// });



// $("#init").click(function(){

// $.ajax({
// url: 'https://dev.post.tm/v2/user/init',
// headers: {
//   'Content-Type': 'application/json',
//   'X-CSRFToken': tokenn,
// },
// type: "GET",
// // xhrFields: { withCredentials: true },
// // dataType: "json",
// // data:{'csrftoken': $.cookie('csrftoken'), 'sessionid': $.cookie('sessionid')},
// success: function (result) {
// console.log(result)
// // document.cookie = 'csrftoken='+result.detail.loc[0].sec;
// // phonecheck4log(result.detail.loc[0].sec)

// },
// error: function () {
//     console.log("error");
// }
// });
// });





$(document).on('click', '#login', function(e){
  e.stopImmediatePropagation();
    $.ajax({
    url: 'https://dev.post.tm/v2/auth/token',
    headers: {
        'Content-Type': 'application/json',
    },
    type: "GET",
    dataType: "json",
    success: function (result, textStatus, jqXHR) {
      // console.log(jqXHR.getAllResponseHeaders('Set-Cookie'))
      // document.cookie = 'csrftoken='+result.detail.loc[0].sec;
      // document.cookie = 'sessionid='+result.detail.loc[0].sec+';secure';
      // getJSessionId()
      phonecheck4log(e, result.detail.loc[0].sec)

    },
    error: function () {
        console.log("error");
    }
});
});


function phonecheck4log(e, token){
  e.stopImmediatePropagation();
  tokenn = token;
$.ajax({
    url: 'https://dev.post.tm/v2/auth/login',
    headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        'X-CSRFToken': token
    },
    // xhrFields: { withCredentials: true },
    type: "POST",
    dataType: "json",
    data:{'username': document.getElementById('loginphone').value, 'password': document.getElementById('loginpasswd').value},
    complete:function(event, xhr, settings){
      console.log(xhr.getAllResponseHeaders())
    },
    statusCode: {
      200: function(data){
        var cookie = data.getAllResponseHeaders;
        console.log(cookie)
      }
    },
    success: function (result, textStatus, request) {
      var cookie = request.getAllResponseHeaders();
      console.log(cookie);
  // alert(document.cookie)

// console.log(result)

// var value = $.cookie("sessionid");
// console.log(value)


      // console.log(result.detail.loc[0].csrftoken)
      // document.cookie = 'csrftoken='+result.detail.loc[0].csrftoken;
      document.getElementById('lichka').style.display = 'none';
      document.getElementById('me').style.display = 'block';
      document.getElementById('init').style.display = 'block';
        
    },
    error: function () {
        console.log("error");
    }
});

}



// $("#register").click(function(){
//     $.ajax({
//     url: 'https://dev.post.tm/v2/auth/token',
//     headers: {
//         'Content-Type': 'application/json',
//     },
//     type: "GET",
//     dataType: "json",
//     success: function (result) {
//   document.cookie = 'csrftoken='+result.detail.loc[0].sec;
// phonecheck4reg(result.detail.loc[0].sec)
// console.log(result)
//     },
//     error: function () {
//         console.log("error");
//     }
// });
// });



// function phonecheck4reg(token){
//   tokenn = token;
// $.ajax({
//     url: 'https://dev.post.tm/v2/auth/register',
//     headers: {
//         'Content-Type': 'application/json',
//         'X-CSRFToken': token
//     },
//     type: "POST",
//     dataType: "json",
//     data:JSON.stringify({'phone': document.getElementById('regphone').value}),
//     success: function (result) {
//      var otp = document.getElementById('otp').value;
//      var passwd = document.getElementById('passwd').value;
// smsid = result.detail.loc[0].sms_id
// document.getElementById('otpform').style.display = 'block';
// document.getElementById('passwdform').style.display = 'block';
// document.getElementById('registerbtn').style.display = 'none';
// document.getElementById('confirmbtn').style.display = 'block';
// console.log(result)
        
//     },
//     error: function () {
//         console.log("error");
//     }
// });

// }



// $("#confirm").click(function(){
//   var otp = document.getElementById('otp').value
//   var passwd = document.getElementById('passwd').value
//   $.ajax({
//     url: 'https://dev.post.tm/v2/auth/confirm',
//     headers: {
//         'Content-Type': 'application/json',
//         'X-CSRFToken': tokenn
//     },
//     type: "POST",
//     dataType: "json",
//     data:JSON.stringify({'sms_id': smsid, 'code':otp, 'pwd':passwd}),
//     success: function (result) {
//     //  console.log(result)
// document.cookie = 'csrftoken='+result.detail.loc[0].csrftoken;
// console.log(result)
//     },
//     error: function () {
//         console.log("error");
//     }
// });

// })
  

</script>


</html>

